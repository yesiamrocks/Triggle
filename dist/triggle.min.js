!function(t){"function"==typeof define&&define.amd?define(t):t()}(function(){"use strict";!function(){const t=["touchstart","touchend","scroll"],e=new WeakMap;function r(t,e,r=!1,i,a,n=!1,g){if(window.__trg_TRIGGER_DISABLED)return;i&&(t.style.animationDelay=i),a&&(t.style.animationDuration=a);const o=e.split(" ").filter(Boolean);n?o.forEach(e=>t.classList.toggle(e)):o.forEach(e=>t.classList.add(e));const l=()=>{t.style.animationDelay="",t.style.animationDuration=""};if(r&&!n){const r=()=>{o.forEach(e=>t.classList.remove(e)),l(),t.removeEventListener("animationend",r),t.dispatchEvent(new CustomEvent("triggle:animationEnd",{detail:{class:e}})),"function"==typeof g&&g()};t.addEventListener("animationend",r)}else l(),"function"==typeof g&&g()}function i(){document.querySelectorAll("[data-triggle]").forEach(i=>{const a=i.getAttribute("data-triggle").split(",").map(t=>t.trim()),n=i.getAttribute("data-triggle-class"),g="true"===i.getAttribute("data-triggle-reset"),o=i.getAttribute("data-triggle-delay"),l=i.getAttribute("data-triggle-duration"),s=i.getAttribute("data-triggle-key"),u="true"===i.getAttribute("data-triggle-once"),d="true"===i.getAttribute("data-triggle-toggle"),c=i.getAttribute("data-triggle-target"),f=i.getAttribute("data-triggle-next"),y=parseInt(i.getAttribute("data-triggle-chain-delay"),10)||0,m=i.getAttribute("data-triggle-group"),p=parseInt(i.getAttribute("data-triggle-stagger"),10)||0;if(!n&&!m)return void(window.__trg_DEBUG&&console.warn("[triggle] Missing data-triggle-class or group for:",i));const A=t=>{if(("keydown"===t.type||"keyup"===t.type)&&s&&!function(t,e){return t.split(",").map(t=>t.trim().toLowerCase()).some(t=>{const r=t.split("+"),i=r.pop(),a=r,n=i===e.key.toLowerCase(),g=a.every(t=>"ctrl"===t&&e.ctrlKey||"shift"===t&&e.shiftKey||"alt"===t&&e.altKey),o=n&&(0===a.length||g);return window.__trg_DEBUG&&console.log(`[triggle] key match: ${o}`,{rule:t,eventKey:e.key,event:e}),o})}(s,t))return;const a=function(t,r){if(!r)return t;if(e.has(t))return e.get(t);const i=r.startsWith(".")||r.startsWith("#")?document.querySelector(r):t.closest(r);return i&&e.set(t,i),i}(i,c);if(!a)return void(window.__trg_DEBUG&&console.warn(`[triggle] Target element not found: ${c}`,i));window.__trg_DEBUG&&console.log(`[triggle] trigger: ${t.type}`,{element:i,target:a,animationClass:n,reset:g,delay:o,duration:l,once:u,toggle:d,nextSelector:f,chainDelay:y,groupName:m,staggerValue:p});r(a,n,g,o,l,d,()=>{if(f){const t=document.querySelector(f);if(t){const e=t.getAttribute("data-triggle-class"),i="true"===t.getAttribute("data-triggle-reset"),a=t.getAttribute("data-triggle-delay"),n=t.getAttribute("data-triggle-duration"),g="true"===t.getAttribute("data-triggle-toggle");setTimeout(()=>{r(t,e,i,a,n,g)},y)}}if(m){document.querySelectorAll(`[data-triggle-group="${m}"]`).forEach((t,e)=>{const i=t.getAttribute("data-triggle-class"),a="true"===t.getAttribute("data-triggle-reset"),n=t.getAttribute("data-triggle-delay"),g=t.getAttribute("data-triggle-duration"),o="true"===t.getAttribute("data-triggle-toggle");r(t,i,a,p>0?e*p+"ms":n,g,o)})}}),u&&i.removeEventListener(t.type,A)};a.forEach(e=>{i.addEventListener(e,A,!!t.includes(e)&&{passive:!0})})})}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",i):i(),window.triggle={init:i,destroy:function(){document.querySelectorAll("[data-triggle]").forEach(t=>{t.replaceWith(t.cloneNode(!0))})},apply:r}}()});
//# sourceMappingURL=triggle.min.js.map
