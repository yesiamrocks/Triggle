(function(E){typeof define=="function"&&define.amd?define(E):E()})(function(){"use strict";(function(){const E=["touchstart","touchend","scroll"],L=new WeakMap;function p(t,l,b=!1,f,y,A=!1,u){if(window.__trg_TRIGGER_DISABLED)return;f&&(t.style.animationDelay=f),y&&(t.style.animationDuration=y);const c=l.split(" ").filter(Boolean);A?c.forEach(i=>t.classList.toggle(i)):c.forEach(i=>t.classList.add(i));const r=()=>{t.style.animationDelay="",t.style.animationDuration=""};if(b&&!A){const i=()=>{c.forEach(n=>t.classList.remove(n)),r(),t.removeEventListener("animationend",i),t.dispatchEvent(new CustomEvent("triggle:animationEnd",{detail:{class:l}})),typeof u=="function"&&u()};t.addEventListener("animationend",i)}else r(),typeof u=="function"&&u()}function v(t,l=null){const b=t.getAttribute("data-triggle-class"),f=t.getAttribute("data-triggle-reset")==="true",y=t.getAttribute("data-triggle-delay"),A=t.getAttribute("data-triggle-duration"),u=t.getAttribute("data-triggle-toggle")==="true",c=t.getAttribute("data-triggle-target"),r=t.getAttribute("data-triggle-next"),i=parseInt(t.getAttribute("data-triggle-chain-delay"),10)||0,n=t.getAttribute("data-triggle-chain-loop")==="true",s=t.getAttribute("data-triggle-group"),g=parseInt(t.getAttribute("data-triggle-stagger"),10)||0,m=function(e,a){if(!a)return e;if(L.has(e))return L.get(e);const o=a.startsWith(".")||a.startsWith("#")?document.querySelector(a):e.closest(a);return o&&L.set(e,o),o}(t,c);m&&p(m,b,f,y,A,u,()=>{if(r){const e=document.querySelector(r);if(e){const a=e.getAttribute("data-triggle-class"),o=e.getAttribute("data-triggle-reset")==="true",d=e.getAttribute("data-triggle-delay"),h=e.getAttribute("data-triggle-duration"),S=e.getAttribute("data-triggle-toggle")==="true";setTimeout(()=>{p(e,a,o,d,h,S,()=>{n&&l?setTimeout(()=>{v(l,l)},i):n&&!l&&v(t,t)})},i)}}s&&document.querySelectorAll(`[data-triggle-group="${s}"]`).forEach((e,a)=>{const o=e.getAttribute("data-triggle-class"),d=e.getAttribute("data-triggle-reset")==="true",h=e.getAttribute("data-triggle-delay"),S=e.getAttribute("data-triggle-duration"),D=e.getAttribute("data-triggle-toggle")==="true";p(e,o,d,g>0?a*g+"ms":h,S,D)})})}function w(){document.querySelectorAll("[data-triggle]").forEach(t=>{const l=t.getAttribute("data-triggle").split(",").map(r=>r.trim()),b=t.getAttribute("data-triggle-key"),f=t.getAttribute("data-triggle-once")==="true",y=t.getAttribute("data-triggle-scroll")==="true",A=t.getAttribute("data-triggle-group"),u=parseInt(t.getAttribute("data-triggle-stagger"),10)||0,c=r=>{(r.type!=="keydown"&&r.type!=="keyup"||!b||function(i,n){return i.split(",").map(s=>s.trim().toLowerCase()).some(s=>{const g=s.split("+"),m=g.pop(),e=g,a=m===n.key.toLowerCase(),o=e.every(d=>d==="ctrl"&&n.ctrlKey||d==="shift"&&n.shiftKey||d==="alt"&&n.altKey);return a&&(e.length===0||o)})}(b,r))&&(v(t),f&&t.removeEventListener(r.type,c))};l.forEach(r=>{y&&r==="scroll"?new IntersectionObserver((i,n)=>{i.forEach(s=>{s.isIntersecting&&(A?document.querySelectorAll(`[data-triggle-group="${A}"]`).forEach((g,m)=>{const e=g.getAttribute("data-triggle-class"),a=g.getAttribute("data-triggle-reset")==="true",o=g.getAttribute("data-triggle-delay"),d=g.getAttribute("data-triggle-duration"),h=g.getAttribute("data-triggle-toggle")==="true";p(g,e,a,u>0?m*u+"ms":o,d,h)}):v(t),f&&n.unobserve(s.target))})},{threshold:.5}).observe(t):t.addEventListener(r,c,!!E.includes(r)&&{passive:!0})})})}document.readyState==="loading"?document.addEventListener("DOMContentLoaded",w):w(),window.triggle={init:w,destroy:function(){document.querySelectorAll("[data-triggle]").forEach(t=>{t.replaceWith(t.cloneNode(!0))})},apply:p}})()});
//# sourceMappingURL=triggle.min.js.map
